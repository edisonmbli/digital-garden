PRD “光影代码”数字花园 (Code in Light)
version：V2.3

## 1. 核心原则与技术理念 (Guiding Principles)
核心原则与产品定位 (Core Pillars & Positioning)
1.1 影像优先 (Photography First):
  - 定位: 本质上，这是一个摄影师的线上作品集。所有设计、布局和交互，都必须服务于“最大化地、沉浸式地展示摄影作品”这一核心目标。UI 元素必须保持极简、优雅，绝不喧宾夺主。
1.2 透明建造 (Build in Public):
  - 定位: 项目的“第二身份”，是一个开源的、可供学习的“活的”教程。我们将通过独立的 /log 板块，完整、翔实地记录下这个网站从零到一的构建全过程。
1.3 设计驱动与极致体验 (Design-Driven & Premium Experience):
  - 原则: 我们追求的不是“可用”，而是“令人愉悦”。通过微交互与动效 (Framer Motion)、动态与非对称布局 (Masonry Grid) 以及高质量的视觉素材，创造出一种超越普通模板网站的、具有“生命感”和“高级感”的浏览体验。

## 2. 信息架构 v2.0 (Information Architecture)
我们采用更聚焦、主次更分明的导航结构。
/ (首页 - 沉浸式作品集入口)
  ├── /about (关于我 - 讲述双重故事)
  ├── /gallery (影像馆)
  │     └── /gallery/[group-slug] (影像组详情页)
  │          └── (模态框或页面) 单张照片详情页
  └── /log (开发者日志 - 独立入口)
        └── /log/[post-slug] (文章详情页)
- 核心变更:
  - 首页 (/): 不再是多个“楼层”的聚合，而是回归纯粹，作为一个沉浸式的、以视觉为导向的精选作品入口，第一时间抓住访客眼球。
  - 开发者日志 (/log): 成为一个独立的、次要的分区，仅在主导航中保留入口，不干扰首页的核心体验。
  - 新增关于我 (/about): 这是一个关键的静态页面，用于向访客清晰地讲述这个网站“摄影作品集”和“开源教程”的双重身份。

## 3. 功能需求 (Functional Requirements) 
3.1 用户认证 (Authentication - powered by Clerk)
- FR-1.1 (公开访问): 所有访客默认可以浏览网站的绝大部分内容。
- FR-1.2 (登录/注册入口): 在网站导航栏为未登录用户提供清晰的登录/注册入口。
- FR-1.3 (用户状态显示): 对于已登录用户，在同一位置应显示 <UserButton>。
- FR-1.4 (认证方式):
  - 主要方式: 邮箱/密码登录。
  - 社交登录支持: (教程扩展点) 为了覆盖不同地区的用户习惯，必须集成 Google、GitHub 两种社交登录方式。

3.2 内容呈现 (Content Presentation - powered by Sanity & Next.js)
- FR-2.1 首页 (/)
  - 布局: 彻底重构。采用一个全屏或大尺寸的、极具视觉冲击力的 Hero 区域。可以是一个动态的视频背景、一个优雅的图片轮播、或一张精心挑选的巨幅摄影作品。
  - 核心元素: 只有一个主标题（如“光影之间，定格瞬间”）、一段简短的副标题，和一个明确的号召性用语 (CTA) 按钮（如“进入画廊”）。
  FR-2.2 关于我 (/about)
  - 布局: 经典的双栏布局。左侧为文字叙述，右侧为个人肖像和社交媒体链接。
  - 内容: 必须清晰地讲述这个网站的双重故事，并为希望学习技术实现的访客，提供指向 /log 板块的明确入口。
  FR-2.3 影像馆 (/gallery)
  - 列表页: 采用响应式的砌体式网格 (Masonry Grid) 布局，展示各个“影像组”的封面。
  - 详情页: 采用瀑布流布局，混合展示照片和视频，创造富有节奏感的视觉流。
  FR-2.4 开发者日志 (/log)
  - 布局: 需要进行独立的产品化设计。
    - 页面顶部: 包含一段清晰的介绍文字，说明这个板块的背景和价值。
    - 功能区: 必须包含基础的搜索框和按系列/标签筛选的选项。
    - 内容区: 以清晰的卡片列表形式，展示所有教程文章。

3.3 用户交互 (User Interaction - powered by Server Actions & Prisma)
- FR-3.1 (权限控制):
  - 点赞与评论: 任何登录用户，都可以对单张照片或单篇文章进行点赞和评论。
- FR-3.2 (数据变更):
  - 所有交互操作必须通过 Server Actions 实现，并提供乐观更新 (Optimistic UI) 和 pending 状态。
  - 操作成功后，必须通过 revalidateTag 机制，让相关页面的数据显示为最新状态。

3.4 内容与站点管理 (Content & Site Management)
- FR-4.1 (内容管理): 所有“内容密集型”的数据（摄影作品、日志文章、关于我页面等），必须通过 Sanity Studio 进行管理。
- FR-4.2 (站内简易后台 - 作者专属):
  - 在主站内，提供一个受角色权限 (role: "admin") 保护的 /admin 页面。
  - 该页面允许网站所有者查看和管理（如删除）所有用户评论。

## 4. 非功能性需求 (Non-Functional Requirements)
- NFR-1 (性能):
  - 静态优先: 所有内容页面必须默认被静态生成 (SSG) 并可通过 On-Demand ISR 进行更新。
  - 核心 Web 指标: 线上环境的所有页面的 LCP, FID, CLS 指标必须达到“良好”标准。
  - 动效性能: 所有引入的动画效果，必须使用硬件加速的 CSS 属性（如 transform, opacity），并通过 Framer Motion 等专业库实现，确保在各种设备上都保持流畅。
- NFR-2 (开发与部署):
  - 环境隔离: 严格分离本地（Docker Postgres）与生产（Neon/Vercel Postgres）的数据库环境。
  - CI/CD: 所有代码变更必须通过 GitHub PR -> Vercel 预览部署 -> 合并到 main -> 自动生产部署的流程进行。
- NFR-3 (安全):
  - 数据边界: 严格遵循 DAL + DTO 模式。
  - 授权: 所有需要权限的操作，必须在 Server Action 或 DAL 中进行严格的后端校验。
- NFR-4 (可访问性 & SEO):
  - SEO: 所有页面必须通过 generateMetadata 动态生成精准的元数据。
  - A11y: 所有可交互元素必须符合基本的无障碍标准。
  - 需要为 /about 页面，精心撰写 SEO 元数据，以吸引对“Build in Public”和“独立开发”感兴趣的目标流量。
- NFR-5 (国际化 - Internationalization, i18n):
  - 支持语言: 网站 UI 和内容（通过 Sanity）必须至少支持中文 (zh) 和英文 (en) 两种语言。
  - 路由策略: 必须采用基于路径的国际化策略 (e.g., /en/log, /zh/log)。
  - 语言检测: 必须通过 Middleware 自动检测用户浏览器偏好，并重定向到相应的语言路径。
  - 语言切换器: 网站必须在页面的一个固定位置（如页脚），提供一个清晰的、允许用户手动切换语言（中/英）的UI组件。
- NFR-6 (视觉模式 - Visual Mode):
  - 网站必须支持亮色 (Light) 和暗黑 (Dark) 两种视觉主题。
  - 应提供一个清晰、易于访问的切换按钮，让用户可以手动切换主题。
  - （可选，v2考虑）应用应能自动检测并匹配用户操作系统的颜色偏好设置